apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

labels:
  - includeSelectors: true
    pairs:
      app: gridsuite

patches:
- path: patches/deployments.yaml
  target:
    kind: Deployment
- path: patches/deployments-springboot.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
- path: patches/deployments-springboot-dbconfig.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/springboot-with-database=true
- path: patches/deployments-apache.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-apache
- path: patches/deployments-apache-gridapp.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/apache-gridapp=true
- path: patches/services-springboot.yaml
  target:
    kind: Service
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
- path: patches/services-apache.yaml
  target:
    kind: Service
    labelSelector: app.kubernetes.io/component=gridsuite-apache
- path: patches/cronjobs.yaml
  target:
    kind: CronJob
- path: patches/ingresses.yaml
  target:
    kind: Ingress
- path: patches/cronjobs-dbconfig.yaml
  target:
    kind: CronJob
    labelSelector: gridsuite.org/cronjob-with-database=true
- path: patches/deployments-springboot-cpu-minimal.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-minimal
- path: patches/deployments-springboot-cpu-small.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-small
- path: patches/deployments-springboot-cpu-medium.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-medium
- path: patches/deployments-springboot-cpu-medium-plus.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-medium-plus
- path: patches/deployments-springboot-cpu-large.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-large
- path: patches/deployments-springboot-cpu-xlarge.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-xlarge
- path: patches/deployments-springboot-cpu-xxlarge.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-xxlarge
- path: patches/deployments-springboot-cpu-security-analysis.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/cpu=cpu-security-analysis
- path: patches/deployments-springboot-memory-xxs.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xxs
- path: patches/deployments-springboot-memory-xs.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xs
- path: patches/deployments-springboot-memory-s.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-s
- path: patches/deployments-springboot-memory-m.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-m
- path: patches/deployments-springboot-memory-l.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-l
- path: patches/deployments-springboot-memory-xl.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xl
- path: patches/deployments-springboot-memory-xxl.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xxl
- path: patches/deployments-springboot-memory-xxxl.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xxxl
- path: patches/deployments-springboot-memory-security.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-security
- path: patches/deployments-springboot-memory-m-forking.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-m-forking
- path: patches/deployments-springboot-memory-l-forking.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-l-forking
- path: patches/deployments-springboot-memory-xl-forking.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xl-forking
- path: patches/deployments-springboot-memory-xxl-forking.yaml
  target:
    kind: Deployment
    labelSelector: app.kubernetes.io/component=gridsuite-springboot
    annotationSelector: gridsuite.org/memory=memory-xxl-forking
- path: patches/deployments-springboot-elasticsearch-config.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/springboot-with-elasticsearch=true
- path: patches/deployments-springboot-rabbitmq-config.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/springboot-with-rabbitmq=true
- path: patches/deployments-springboot-s3-config.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/springboot-with-s3=true
- path: patches/deployments-springboot-large-storage-config.yaml
  target:
    kind: Deployment
    labelSelector: gridsuite.org/springboot-with-large-storage=true