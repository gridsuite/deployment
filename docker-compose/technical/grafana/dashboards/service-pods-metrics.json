{
  "__inputs": [
    {
      "name": "DS_THANOS-GRIDSUITE-DEV",
      "label": "thanos-gridsuite-dev",
      "description": "",
      "type": "datasource",
      "pluginId": "prometheus",
      "pluginName": "Prometheus"
    },
    {
      "name": "DS_EXPRESSION",
      "label": "Expression",
      "description": "",
      "type": "datasource",
      "pluginId": "__expr__"
    },
    {
      "name": "VAR_SERVICE",
      "type": "constant",
      "label": "Service",
      "value": "kube-prometheus-stack-kubelet",
      "description": ""
    },
    {
      "name": "VAR_CONTAINER",
      "type": "constant",
      "label": "Container",
      "value": "main",
      "description": ""
    }
  ],
  "__elements": {},
  "__requires": [
    {
      "type": "datasource",
      "id": "__expr__",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "bargauge",
      "name": "Bar gauge",
      "version": ""
    },
    {
      "type": "panel",
      "id": "gauge",
      "name": "Gauge",
      "version": ""
    },
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "10.2.2"
    },
    {
      "type": "panel",
      "id": "piechart",
      "name": "Pie chart",
      "version": ""
    },
    {
      "type": "datasource",
      "id": "prometheus",
      "name": "Prometheus",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "stat",
      "name": "Stat",
      "version": ""
    },
    {
      "type": "panel",
      "id": "text",
      "name": "Text",
      "version": ""
    },
    {
      "type": "panel",
      "id": "timeseries",
      "name": "Time series",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "description": "Metrics of pods composing a service (server, webapp, etc...)",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Some notes for users",
      "gridPos": {
        "h": 3,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 4,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "Notes:<br/>\n<ul>\n  <li>Only show pods, no jobs/cronjob/...</li>\n  <li>Show metrics at pod level, combine containers and processes values.</li>\n</ul>",
        "mode": "html"
      },
      "pluginVersion": "10.2.2",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "CPU system load of pods over sliding 60 sec.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisGridShow": true,
            "axisLabel": "Load (cores)",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 25,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": 60000,
            "lineInterpolation": "stepAfter",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": 60000,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "fieldMinMax": true,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 3
      },
      "id": 1,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "avg_over_time(system_load_average_1m{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\"}[$__interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "System load (avg. 1m)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisGridShow": true,
            "axisLabel": "Load (cores)",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 25,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": 60000,
            "lineInterpolation": "stepAfter",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": 60000,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "fieldMinMax": true,
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 80
              },
              {
                "color": "red",
                "value": 90
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 3
      },
      "id": 317,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "variance"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "system_cpu_usage{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "System CPU usage",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "decimals": 0,
          "fieldMinMax": true,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "red",
                  "index": 3,
                  "text": "0️"
                }
              },
              "type": "value"
            },
            {
              "options": {
                "match": "empty",
                "result": {
                  "index": 0,
                  "text": "∅"
                }
              },
              "type": "special"
            },
            {
              "options": {
                "match": "null",
                "result": {
                  "index": 1,
                  "text": "␀"
                }
              },
              "type": "special"
            },
            {
              "options": {
                "match": "nan",
                "result": {
                  "color": "semi-dark-red",
                  "index": 2,
                  "text": "NaN"
                }
              },
              "type": "special"
            }
          ],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 11
      },
      "id": 7,
      "options": {
        "displayMode": "basic",
        "minVizHeight": 10,
        "minVizWidth": 0,
        "namePlacement": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^Value$/",
          "limit": 100,
          "values": true
        },
        "showUnfilled": true,
        "valueMode": "text"
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(system_cpu_count{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", container=\"$container\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{pod}}",
          "range": false,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Nb CPU cores",
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "instance": true,
              "job": true,
              "namespace": true,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {}
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "field": "pod"
              }
            ]
          }
        }
      ],
      "type": "bargauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Informs fair-share CPU competition in shared environments.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "fieldMinMax": false,
          "mappings": [],
          "min": 0,
          "noValue": "0",
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 11
      },
      "id": 383,
      "options": {
        "displayLabels": [
          "percent"
        ],
        "legend": {
          "displayMode": "table",
          "placement": "right",
          "showLegend": true,
          "values": [
            "value"
          ]
        },
        "pieType": "pie",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "",
          "values": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "avg_over_time(container_spec_cpu_shares{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\"}[$__interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{pod}}",
          "range": false,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "CPU alloction share",
      "type": "piechart"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 19
      },
      "id": 419,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "description": "TODO if >60s then red",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "dateTimeFromNow"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 2,
            "w": 3,
            "x": 0,
            "y": 36
          },
          "id": 420,
          "options": {
            "colorMode": "none",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/^Value$/",
              "values": false
            },
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "last_over_time(container_last_seen{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container!=\"POD\", pod=~\"$pods\"}[$__interval])",
              "format": "table",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": true,
              "legendFormat": "{{pod}}",
              "range": false,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Last seen",
          "transformations": [],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 3,
            "y": 36
          },
          "id": 422,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "system_cpu_usage{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "CPU usage",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "dark-yellow",
                    "value": 85
                  },
                  {
                    "color": "orange",
                    "value": 90
                  },
                  {
                    "color": "red",
                    "value": 95
                  },
                  {
                    "color": "dark-red",
                    "value": 99
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 6,
            "y": 36
          },
          "id": 423,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/^usage$/",
              "values": false
            },
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "container_memory_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "usage",
              "range": true,
              "refId": "RamUsage",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "container_memory_max_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "max_recorded",
              "range": true,
              "refId": "RamMaxUsage",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "container_spec_memory_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "RamMax",
              "useBackend": false
            }
          ],
          "title": "RAM usage",
          "transformations": [
            {
              "id": "configFromData",
              "options": {
                "configRefId": "RamMaxUsage",
                "mappings": [
                  {
                    "fieldName": "Time",
                    "handlerKey": "__ignore"
                  },
                  {
                    "fieldName": "max_recorded",
                    "handlerKey": "max"
                  }
                ]
              }
            },
            {
              "id": "configFromData",
              "options": {
                "configRefId": "RamMax",
                "mappings": [
                  {
                    "fieldName": "Time",
                    "handlerKey": "__ignore"
                  },
                  {
                    "fieldName": "max",
                    "handlerKey": "threshold1"
                  }
                ]
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-GrYlRd"
              },
              "fieldMinMax": false,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "super-light-green",
                    "value": 50
                  },
                  {
                    "color": "super-light-yellow",
                    "value": 60
                  },
                  {
                    "color": "light-yellow",
                    "value": 65
                  },
                  {
                    "color": "yellow",
                    "value": 70
                  },
                  {
                    "color": "semi-dark-yellow",
                    "value": 75
                  },
                  {
                    "color": "dark-yellow",
                    "value": 85
                  },
                  {
                    "color": "orange",
                    "value": 90
                  },
                  {
                    "color": "red",
                    "value": 95
                  },
                  {
                    "color": "dark-red",
                    "value": 99
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 9,
            "y": 36
          },
          "id": 424,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/^usage$/",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "container_memory_swap{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "usage",
              "range": true,
              "refId": "SwapUsage",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_spec_memory_swap_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": true,
              "legendFormat": "max",
              "range": false,
              "refId": "SwapMax",
              "useBackend": false
            }
          ],
          "title": "Swap usage",
          "transformations": [
            {
              "id": "configFromData",
              "options": {
                "configRefId": "SwapMax",
                "mappings": [
                  {
                    "fieldName": "max",
                    "handlerKey": "max"
                  },
                  {
                    "fieldName": "Time",
                    "handlerKey": "__ignore"
                  }
                ]
              }
            }
          ],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "fixed"
              },
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 12,
            "y": 36
          },
          "id": 425,
          "options": {
            "colorMode": "none",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/^current$/",
              "values": false
            },
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_processes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "current",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Processes",
          "transformations": [],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 80
                  },
                  {
                    "color": "orange",
                    "value": 90
                  },
                  {
                    "color": "red",
                    "value": 95
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 15,
            "y": 36
          },
          "id": 426,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/^current$/",
              "values": false
            },
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_threads{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "current",
              "range": true,
              "refId": "Current",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_threads_max{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "Max",
              "useBackend": false
            }
          ],
          "title": "Threads",
          "transformations": [
            {
              "id": "configFromData",
              "options": {
                "applyTo": {
                  "id": "byType",
                  "options": "number"
                },
                "configRefId": "Max",
                "mappings": [
                  {
                    "fieldName": "max",
                    "handlerKey": "max"
                  },
                  {
                    "fieldName": "Time",
                    "handlerKey": "__ignore"
                  }
                ]
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "displayName": "${__cell_0}",
              "fieldMinMax": false,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 80
                  },
                  {
                    "color": "orange",
                    "value": 85
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 36
          },
          "id": 427,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/^value$/",
              "values": true
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_fs_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "format": "table",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": true,
              "legendFormat": "{{device}}",
              "range": false,
              "refId": "Usage",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "container_fs_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
              "format": "table",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": true,
              "legendFormat": "{{device}}",
              "range": false,
              "refId": "Limit",
              "useBackend": false
            }
          ],
          "title": "FS usage",
          "transformations": [
            {
              "filter": {
                "id": "byRefId",
                "options": "Usage"
              },
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "__name__": true,
                  "cluster_name": true,
                  "container": true,
                  "endpoint": true,
                  "id": true,
                  "image": true,
                  "instance": true,
                  "job": true,
                  "metrics_path": true,
                  "name": true,
                  "namespace": true,
                  "node": true,
                  "pod": false,
                  "prometheus": true,
                  "prometheus_replica": true,
                  "service": true
                },
                "indexByName": {},
                "renameByName": {
                  "Value #InodeFree": "value",
                  "Value #InodeMax": "max"
                }
              }
            },
            {
              "filter": {
                "id": "byRefId",
                "options": "Limit"
              },
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "__name__": true,
                  "cluster_name": true,
                  "container": true,
                  "endpoint": true,
                  "id": true,
                  "image": true,
                  "instance": true,
                  "job": true,
                  "metrics_path": true,
                  "name": true,
                  "namespace": true,
                  "node": true,
                  "prometheus": true,
                  "prometheus_replica": true,
                  "service": true
                },
                "indexByName": {},
                "renameByName": {
                  "Value #InodeMax": "max",
                  "pod": ""
                }
              }
            },
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "pod": true
                },
                "indexByName": {},
                "renameByName": {
                  "Value #InodeFree": "value",
                  "Value #InodeMax": "max",
                  "Value #Limit": "max",
                  "Value #Usage": "value"
                }
              }
            }
          ],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "description": "Duration of the last pod start.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "dateTimeFromNow"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 2,
            "w": 3,
            "x": 0,
            "y": 38
          },
          "id": 421,
          "options": {
            "colorMode": "none",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/^Value$/",
              "values": false
            },
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_THANOS-GRIDSUITE-DEV}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "last_over_time(container_start_time_seconds{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container!=\"POD\", pod=~\"$pods\"}[$__interval])",
              "format": "table",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": true,
              "legendFormat": "{{pod}}",
              "range": false,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Last start duration",
          "transformations": [],
          "type": "stat"
        }
      ],
      "repeat": "pods",
      "repeatDirection": "h",
      "title": "Quick view of ${pods}",
      "type": "row"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 20
      },
      "id": 3,
      "panels": [],
      "repeat": "pods",
      "repeatDirection": "h",
      "title": "Details of pod $pods",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "TODO if >60s then red",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "dateTimeFromNow"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 3,
        "x": 0,
        "y": 21
      },
      "id": 2,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^Value$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_last_seen{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container!=\"POD\", pod=~\"$pods\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{pod}}",
          "range": false,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Last seen",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "fieldMinMax": true,
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 80
              },
              {
                "color": "red",
                "value": 90
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 3,
        "y": 21
      },
      "id": 376,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "system_cpu_usage{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "CPU usage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 2,
          "fieldMinMax": false,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "dark-yellow",
                "value": 85
              },
              {
                "color": "orange",
                "value": 90
              },
              {
                "color": "red",
                "value": 95
              },
              {
                "color": "dark-red",
                "value": 99
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 6,
        "y": 21
      },
      "id": 265,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^usage$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "usage",
          "range": true,
          "refId": "RamUsage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_max_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "max_recorded",
          "range": true,
          "refId": "RamMaxUsage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_spec_memory_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "max",
          "range": true,
          "refId": "RamMax",
          "useBackend": false
        }
      ],
      "title": "RAM usage",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "configRefId": "RamMaxUsage",
            "mappings": [
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              },
              {
                "fieldName": "max_recorded",
                "handlerKey": "max"
              }
            ]
          }
        },
        {
          "id": "configFromData",
          "options": {
            "configRefId": "RamMax",
            "mappings": [
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              },
              {
                "fieldName": "max",
                "handlerKey": "threshold1"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-GrYlRd"
          },
          "fieldMinMax": false,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "super-light-green",
                "value": 50
              },
              {
                "color": "super-light-yellow",
                "value": 60
              },
              {
                "color": "light-yellow",
                "value": 65
              },
              {
                "color": "yellow",
                "value": 70
              },
              {
                "color": "semi-dark-yellow",
                "value": 75
              },
              {
                "color": "dark-yellow",
                "value": 85
              },
              {
                "color": "orange",
                "value": 90
              },
              {
                "color": "red",
                "value": 95
              },
              {
                "color": "dark-red",
                "value": 99
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 9,
        "y": 21
      },
      "id": 374,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^usage$/",
          "values": false
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_swap{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "usage",
          "range": true,
          "refId": "SwapUsage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_spec_memory_swap_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "max",
          "range": false,
          "refId": "SwapMax",
          "useBackend": false
        }
      ],
      "title": "Swap usage",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "configRefId": "SwapMax",
            "mappings": [
              {
                "fieldName": "max",
                "handlerKey": "max"
              },
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "decimals": 0,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 12,
        "y": 21
      },
      "id": 377,
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^current$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_processes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "current",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Processes",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 80
              },
              {
                "color": "orange",
                "value": 90
              },
              {
                "color": "red",
                "value": 95
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 15,
        "y": 21
      },
      "id": 13,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^current$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_threads{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "current",
          "range": true,
          "refId": "Current",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_threads_max{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "max",
          "range": true,
          "refId": "Max",
          "useBackend": false
        }
      ],
      "title": "Threads",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "applyTo": {
              "id": "byType",
              "options": "number"
            },
            "configRefId": "Max",
            "mappings": [
              {
                "fieldName": "max",
                "handlerKey": "max"
              },
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "displayName": "${__cell_0}",
          "fieldMinMax": false,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "#EAB839",
                "value": 80
              },
              {
                "color": "orange",
                "value": 85
              },
              {
                "color": "red",
                "value": 90
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 18,
        "y": 21
      },
      "id": 418,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^value$/",
          "values": true
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_fs_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{device}}",
          "range": false,
          "refId": "Usage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_fs_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "format": "table",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{device}}",
          "range": false,
          "refId": "Limit",
          "useBackend": false
        }
      ],
      "title": "FS usage",
      "transformations": [
        {
          "filter": {
            "id": "byRefId",
            "options": "Usage"
          },
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "id": true,
              "image": true,
              "instance": true,
              "job": true,
              "metrics_path": true,
              "name": true,
              "namespace": true,
              "node": true,
              "pod": false,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #InodeFree": "value",
              "Value #InodeMax": "max"
            }
          }
        },
        {
          "filter": {
            "id": "byRefId",
            "options": "Limit"
          },
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "id": true,
              "image": true,
              "instance": true,
              "job": true,
              "metrics_path": true,
              "name": true,
              "namespace": true,
              "node": true,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #InodeMax": "max",
              "pod": ""
            }
          }
        },
        {
          "id": "merge",
          "options": {}
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "pod": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #InodeFree": "value",
              "Value #InodeMax": "max",
              "Value #Limit": "max",
              "Value #Usage": "value"
            }
          }
        }
      ],
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Number of files handled (open, read, write ...)",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "decimals": 0,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 21,
        "y": 21
      },
      "id": 415,
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^current$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_file_descriptors{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "current",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Files descriptors",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Duration of the last pod start.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "dateTimeFromNow"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 3,
        "x": 0,
        "y": 23
      },
      "id": 5,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^Value$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_start_time_seconds{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container!=\"POD\", pod=~\"$pods\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{pod}}",
          "range": false,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Last start duration",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "* user: CPU time spent in user space\n* system: CPU time spent in kernel/system space",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 50,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "s"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "system"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "user"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "total"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              },
              {
                "id": "custom.stacking",
                "value": {
                  "group": "A",
                  "mode": "none"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    5,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 25
      },
      "id": 378,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max",
            "sum"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "increase(container_cpu_system_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "system",
          "range": true,
          "refId": "CpuSystem",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "increase(container_cpu_user_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "user",
          "range": true,
          "refId": "CpuUser",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "increase(container_cpu_usage_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "total",
          "range": true,
          "refId": "CpuUsage",
          "useBackend": false
        }
      ],
      "title": "CPU usage",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "How much CPU the container is allowed to use (as set by k8s).\n* **period**: Length of a single CPU quota period _(typically 100ms)_\n* **quota**: Total CPU time available in each period _(e.g., 200,000μs = 2 CPUs)_\n* **shares**: Relative CPU share weight for proportional CPU allocation (used by CFS in shared environments)",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 4,
        "x": 12,
        "y": 25
      },
      "id": 379,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_spec_cpu_period{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "period",
          "range": false,
          "refId": "CpuSpecPeriod",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_spec_cpu_quota{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "quota",
          "range": false,
          "refId": "CpuSpecQuota",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "last_over_time(container_spec_cpu_shares{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__interval])",
          "format": "table",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "shares",
          "range": false,
          "refId": "CpuSpecShare",
          "useBackend": false
        }
      ],
      "title": "CPU configured limits",
      "transformations": [
        {
          "filter": {
            "id": "byRefId",
            "options": "CpuSpecPeriod"
          },
          "id": "organize",
          "options": {
            "excludeByName": {
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "id": true,
              "image": true,
              "instance": true,
              "job": true,
              "metrics_path": true,
              "name": true,
              "namespace": true,
              "node": true,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {}
          }
        },
        {
          "filter": {
            "id": "byRefId",
            "options": "CpuSpecQuota"
          },
          "id": "organize",
          "options": {
            "excludeByName": {
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "id": true,
              "image": true,
              "instance": true,
              "job": true,
              "metrics_path": true,
              "name": true,
              "namespace": true,
              "node": true,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {}
          }
        },
        {
          "filter": {
            "id": "byRefId",
            "options": "CpuSpecShare"
          },
          "id": "organize",
          "options": {
            "excludeByName": {
              "__name__": true,
              "cluster_name": true,
              "container": true,
              "endpoint": true,
              "id": true,
              "image": true,
              "instance": true,
              "job": true,
              "metrics_path": true,
              "name": true,
              "namespace": true,
              "node": true,
              "pod": false,
              "prometheus": true,
              "prometheus_replica": true,
              "service": true
            },
            "indexByName": {},
            "renameByName": {}
          }
        },
        {
          "id": "merge",
          "options": {}
        },
        {
          "id": "renameByRegex",
          "options": {
            "regex": "^Value #CpuSpec(.*)$",
            "renamePattern": "$1"
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Nb cores?",
            "binary": {
              "left": "Quota",
              "operator": "/",
              "right": "Period"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            },
            "replaceFields": false
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "* **periods**: Total number of scheduling periods (from CFS scheduler)\n* **throttled_periods**: How many times the container hit CPU quota\n* **throttled_seconds**: How much time the container was throttled",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "decimals": 0,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "throttled_seconds"
            },
            "properties": [
              {
                "id": "unit",
                "value": "s"
              },
              {
                "id": "displayName",
                "value": "throttled seconds"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "throttled_periods"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "throttled periods"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 16,
        "y": 25
      },
      "id": 380,
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_cfs_periods_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "periods",
          "range": true,
          "refId": "CfsPeriods",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_cfs_throttled_periods_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "throttled_periods",
          "range": true,
          "refId": "CfsThrottledPeriods",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_cfs_throttled_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "throttled_seconds",
          "range": true,
          "refId": "CfsThrottledSeconds",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_spec_cpu_period{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "periods_max",
          "range": true,
          "refId": "CpuPeriodMax",
          "useBackend": false
        }
      ],
      "title": "CPU CFS",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "configRefId": "CpuPeriodMax",
            "mappings": [
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              },
              {
                "fieldName": "periods_max",
                "handlerKey": "threshold1"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "CPU time usage by pod in allowed limit.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 90
              },
              {
                "color": "red",
                "value": 95
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 16,
        "y": 29
      },
      "id": 381,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^CalcPercent.*$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_cfs_periods_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "current",
          "range": true,
          "refId": "Current",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "container_spec_cpu_period{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "max",
          "range": true,
          "refId": "Max",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "__expr__",
            "uid": "${DS_EXPRESSION}"
          },
          "expression": "$Current / $Max",
          "hide": false,
          "refId": "CalcPercent",
          "type": "math"
        }
      ],
      "title": "CPU CFS periods",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "If throttled time is high, container is limited by CPU quota.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "#EAB839",
                "value": 10
              },
              {
                "color": "red",
                "value": 20
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 19,
        "y": 29
      },
      "id": 382,
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^Result \\{cluster_name=\"k8s\\-devopf\", container=\"main\", cpu=\"total\", endpoint=\"https\\-metrics\", id=\"/kubepods\\.slice/kubepods\\-burstable\\.slice/kubepods\\-burstable\\-pode6c149c7_053a_446a_8519_b56ecbae11ea\\.slice/crio\\-2381f35e13be57695a29398dfd11a584b029d59ae37e74ece00d177f6fa7509b\\.scope\", image=\"inca\\.rte\\-france\\.com/gridsuite/gridsuite\\-security\\-analysis\\-server\\-rte@sha256:10ca6110c9ae0144527959d727f40af147ca47515310226a6f4f3b42cb4e22a4\", instance=\"cluster\\-monitoring\", job=\"kubelet\", metrics_path=\"/metrics/cadvisor\", name=\"k8s_main_security\\-analysis\\-server\\-85c44dd9b8\\-f6k5j_gridsuite\\-dev_e6c149c7\\-053a\\-446a\\-8519\\-b56ecbae11ea_0\", namespace=\"gridsuite\\-dev\", node=\"node7\", pod=\"security\\-analysis\\-server\\-85c44dd9b8\\-f6k5j\", prometheus=\"cluster\\-monitoring/k8s\\-kube\\-prometheus\\-stack\\-prometheus\", prometheus_replica=\"prometheus\\-k8s\\-kube\\-prometheus\\-stack\\-prometheus\\-0\", service=\"kube\\-prometheus\\-stack\\-kubelet\"\\}$/",
          "values": false
        },
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_cfs_throttled_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "throttled",
          "range": true,
          "refId": "Throttled",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "increase(container_cpu_usage_seconds_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "usage",
          "range": true,
          "refId": "Usage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "__expr__",
            "uid": "${DS_EXPRESSION}"
          },
          "expression": "${Throttled}/${Usage}",
          "hide": false,
          "refId": "Result",
          "type": "math"
        }
      ],
      "title": "Is CPU being throttled?",
      "transformations": [],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Breakdown of RAM usage:\n- Memory used as cache (page cache)\n- Resident Set Size: non-swappable memory used by the container _(amount of anonymous and swap cache memory, including transparent hugepages)_\n- The amount of working set memory, this includes recently accessed memory,dirty memory, and kernel memory.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "left",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 50,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "dashed+area"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "rss"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-orange",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "cache"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-green",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "wss"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.stacking",
                "value": {
                  "group": "A",
                  "mode": "none"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "usage"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "text",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    2,
                    5
                  ],
                  "fill": "dot"
                }
              },
              {
                "id": "custom.stacking",
                "value": {
                  "group": "A",
                  "mode": "none"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "map_file"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-purple",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "reserved"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-red",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    0,
                    10
                  ],
                  "fill": "dot"
                }
              },
              {
                "id": "custom.stacking",
                "value": {
                  "group": "A",
                  "mode": "none"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 33
      },
      "id": 319,
      "options": {
        "legend": {
          "calcs": [
            "logmin",
            "max",
            "mean"
          ],
          "displayMode": "table",
          "placement": "right",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_rss{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "rss",
          "range": true,
          "refId": "RamRss",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_mapped_file{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "map_file",
          "range": true,
          "refId": "RamMapFile",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_cache{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "cache",
          "range": true,
          "refId": "RamCache",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_working_set_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "wss",
          "range": true,
          "refId": "RamWork",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_spec_memory_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "limit",
          "range": true,
          "refId": "RamMax",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_memory_usage_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "usage",
          "range": true,
          "refId": "RamUsage",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_spec_memory_reservation_limit_bytes{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "reserved",
          "range": true,
          "refId": "RamMin",
          "useBackend": false
        }
      ],
      "title": "RAM usage (detail)",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "configRefId": "RamMax",
            "mappings": [
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              },
              {
                "fieldName": "limit",
                "handlerKey": "threshold1"
              }
            ]
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Receive and transmit data over network.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": true,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 33,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "linearThreshold": 2048,
              "log": 2,
              "type": "symlog"
            },
            "showPoints": "auto",
            "spanNulls": true,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "fieldMinMax": true,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "Receive"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/.*-bytes-.+$/"
            },
            "properties": [
              {
                "id": "unit",
                "value": "binBps"
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/.*-packets-.+$/"
            },
            "properties": [
              {
                "id": "unit",
                "value": "pps"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 41
      },
      "id": 66,
      "options": {
        "legend": {
          "calcs": [
            "variance",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true,
          "sortBy": "Name",
          "sortDesc": false
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "rate(container_network_receive_${packets_or_bytes}_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{interface}}-${packets_or_bytes}-recv",
          "range": true,
          "refId": "Receive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "rate(container_network_transmit_${packets_or_bytes}_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{interface}}-${packets_or_bytes}-send",
          "range": true,
          "refId": "Transmit",
          "useBackend": false
        }
      ],
      "title": "Network I/O",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": true,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 33,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "linearThreshold": 2048,
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": true,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "fieldMinMax": true,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "Receive"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 41
      },
      "id": 97,
      "options": {
        "legend": {
          "calcs": [
            "variance",
            "mean",
            "sum"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "rate(container_network_receive_errors_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-{{interface}}-recv",
          "range": true,
          "refId": "Receive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "rate(container_network_transmit_errors_total{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", pod=~\"$pods\"}[$__rate_interval])",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-{{interface}}-send",
          "range": true,
          "refId": "Transmit",
          "useBackend": false
        }
      ],
      "title": "Network errors",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "Number of open TCP/IP sockets",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": 15000,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "decimals": 0,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 49
      },
      "id": 38,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "container_sockets{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=\"$service\", container=\"$container\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Sockets",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "description": "__is it server or client for tomcat?__\n\nTomcat ThreadPool:\n* `*-tomcat-*-active`: number of connections the connector has handled\n* `*-tomcat-*-keepalive`: requests that can go through the socket before the socket is closed, and reopened for the next request.\n\nNetty Reactor:\n* `*-netty-*`: __?__ \n* `*-netty-*-active`: connections that have been successfully acquired and are in active use.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "dashed+area"
            }
          },
          "decimals": 0,
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "TomcatKeepalive"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "Netty"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    5,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 49
      },
      "id": 431,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max",
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "tomcat_connections_current_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-tomcat-{{name}}-active",
          "range": true,
          "refId": "TomcatActive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "tomcat_connections_keepalive_current_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-tomcat-{{name}}-keepalive",
          "range": true,
          "refId": "TomcatKeepalive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "exemplar": false,
          "expr": "tomcat_connections_config_max_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": true,
          "legendFormat": "{{pod}}-tomcat-{{name}}-max",
          "range": false,
          "refId": "TomcatMax",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "reactor_netty_http_server_connections_active{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-netty-{{uri}}-active",
          "range": true,
          "refId": "NettyActive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "reactor_netty_http_server_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", container=\"$container\", service=~\"$deployment\", pod=~\"$pods\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-netty-{{uri}}",
          "range": true,
          "refId": "Netty",
          "useBackend": false
        }
      ],
      "title": "HTTP connections",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "applyTo": {
              "id": "byType",
              "options": "number"
            },
            "configRefId": "TomcatMax",
            "mappings": [
              {
                "fieldName": "Time",
                "handlerKey": "__ignore"
              },
              {
                "fieldName": "security-analysis-server-85c44dd9b8-f6k5j-tomcat-http-nio-8080-max",
                "handlerKey": "threshold1"
              }
            ]
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "decimals": 0,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 57
      },
      "id": 428,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max",
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "jdbc_connections_active{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": true,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-jdbc-{{name}}-active",
          "range": true,
          "refId": "JdbcActive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "jdbc_connections_idle{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": true,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-jdbc-{{name}}-idle",
          "range": true,
          "refId": "JdbcIdle",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "hikaricp_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-hikaricp-{{pool}}",
          "range": true,
          "refId": "Hikaricp",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "hikaricp_connections_active{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-hikaricp-{{pool}}-active",
          "range": true,
          "refId": "HikaricpActive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "hikaricp_connections_idle{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-hikaricp-{{pool}}-idle",
          "range": true,
          "refId": "HikaricpIdle",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "hikaricp_connections_pending{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-hikaricp-{{pool}}-pending",
          "range": true,
          "refId": "HikaricpPending",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "r2dbc_pool_acquired_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-r2dbc-{{name}}-acquired",
          "range": true,
          "refId": "R2dbcAcquired",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "r2dbc_pool_allocated_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-r2dbc-{{name}}-allocated",
          "range": true,
          "refId": "R2dbcAllocated",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "r2dbc_pool_idle_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-r2dbc-{{name}}-idle",
          "range": true,
          "refId": "R2dbcIdle",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "r2dbc_pool_pending_connections{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-r2dbc-{{name}}-pending",
          "range": true,
          "refId": "R2dbcPending",
          "useBackend": false
        }
      ],
      "title": "Database connections (connections pool)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_THANOS-GRIDSUITE-DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "stepAfter",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "decimals": 0,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 57
      },
      "id": 430,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max",
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "jdbc_connections_active{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-jdbc-{{name}}-active",
          "range": true,
          "refId": "JdbcActive",
          "useBackend": false
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_THANOS-GRIDSUITE-DEV}"
          },
          "disableTextWrap": false,
          "editorMode": "builder",
          "expr": "jdbc_connections_idle{cluster_name=\"$cluster_name\", namespace=\"$namespace\", service=~\"$deployment\", pod=~\"$pods\", container=\"$container\"}",
          "fullMetaSearch": false,
          "hide": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "{{pod}}-jdbc-{{name}}-idle",
          "range": true,
          "refId": "JdbcIdle",
          "useBackend": false
        }
      ],
      "title": "Database connections (JDBC)",
      "type": "timeseries"
    }
  ],
  "refresh": "",
  "schemaVersion": 38,
  "tags": [
    "kubernetes",
    "cadvisor",
    "pod",
    "micrometer",
    "springboot"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "thanos-gridsuite-dev",
          "value": "ff95e04d-e9be-45cf-9216-8fe563b55961"
        },
        "hide": 0,
        "includeAll": false,
        "label": "DataSource",
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "queryValue": "",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "current": {},
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_THANOS-GRIDSUITE-DEV}"
        },
        "definition": "label_values(kube_pod_owner,cluster_name)",
        "description": "",
        "hide": 0,
        "includeAll": false,
        "label": "Cluster",
        "multi": false,
        "name": "cluster_name",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(kube_pod_owner,cluster_name)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "current": {},
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_THANOS-GRIDSUITE-DEV}"
        },
        "definition": "label_values(kube_pod_owner{cluster_name=\"$cluster_name\"},namespace)",
        "hide": 0,
        "includeAll": false,
        "label": "Namespace",
        "multi": false,
        "name": "namespace",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(kube_pod_owner{cluster_name=\"$cluster_name\"},namespace)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "current": {},
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_THANOS-GRIDSUITE-DEV}"
        },
        "definition": "label_values(kube_replicaset_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"Deployment\"},owner_name)",
        "hide": 0,
        "includeAll": false,
        "label": "Deployment",
        "multi": true,
        "name": "deployment",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(kube_replicaset_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"Deployment\"},owner_name)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": "",
        "current": {},
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_THANOS-GRIDSUITE-DEV}"
        },
        "definition": "label_values(kube_replicaset_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"Deployment\", owner_name=~\"$deployment\"},replicaset)",
        "hide": 2,
        "includeAll": true,
        "label": "ReplicaSets",
        "multi": true,
        "name": "replicatset",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(kube_replicaset_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"Deployment\", owner_name=~\"$deployment\"},replicaset)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {},
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_THANOS-GRIDSUITE-DEV}"
        },
        "definition": "label_values(kube_pod_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"ReplicaSet\", owner_name=~\"$replicatset\"},pod)",
        "hide": 0,
        "includeAll": true,
        "label": "Pods",
        "multi": true,
        "name": "pods",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(kube_pod_owner{cluster_name=\"$cluster_name\", namespace=\"$namespace\", owner_kind=\"ReplicaSet\", owner_name=~\"$replicatset\"},pod)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "description": "Thanks for the duplicate metrics!...",
        "hide": 2,
        "label": "Service",
        "name": "service",
        "query": "${VAR_SERVICE}",
        "skipUrlSync": false,
        "type": "constant",
        "current": {
          "value": "${VAR_SERVICE}",
          "text": "${VAR_SERVICE}",
          "selected": false
        },
        "options": [
          {
            "value": "${VAR_SERVICE}",
            "text": "${VAR_SERVICE}",
            "selected": false
          }
        ]
      },
      {
        "description": "Thanks for the duplicate metrics!...",
        "hide": 2,
        "label": "Container",
        "name": "container",
        "query": "${VAR_CONTAINER}",
        "skipUrlSync": false,
        "type": "constant",
        "current": {
          "value": "${VAR_CONTAINER}",
          "text": "${VAR_CONTAINER}",
          "selected": false
        },
        "options": [
          {
            "value": "${VAR_CONTAINER}",
            "text": "${VAR_CONTAINER}",
            "selected": false
          }
        ]
      },
      {
        "current": {
          "selected": false,
          "text": "bytes",
          "value": "bytes"
        },
        "description": "Either show network I/O in packets/sec or bytes/sec.",
        "hide": 0,
        "includeAll": false,
        "label": "I/O (netw)",
        "multi": false,
        "name": "packets_or_bytes",
        "options": [
          {
            "selected": true,
            "text": "bytes",
            "value": "bytes"
          },
          {
            "selected": false,
            "text": "packets",
            "value": "packets"
          }
        ],
        "query": "bytes,packets",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-12h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "",
  "title": "Service's pods metrics",
  "uid": "b90be924-a0b9-4d10-b044-f01bd5d93c2b",
  "version": 35,
  "weekStart": ""
}